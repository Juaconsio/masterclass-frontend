---
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import Logo from '/src/assets/imagotipo.svg';

const links = [
  { href: '/', label: 'Inicio', icon: 'mdi:home' },
  { href: '/courses', label: 'Cursos', icon: 'mdi:book' },
  { href: '/equipo', label: 'Equipo', icon: 'mdi:account-group' },
  { href: '/#contact', label: 'Contacto', icon: 'mdi:contact-mail' },
];

const current = Astro.url.pathname + (Astro.url.hash ?? '');
const isActive = (href: string) => href === current;
---

<!-- Navbar principal: estructura DaisyUI navbar-start | navbar-center | navbar-end -->
<nav
  class="navbar h-navbar bg-base-100/80 border-base-300 fixed top-0 z-50 border-b px-3 backdrop-blur sm:px-4 md:px-6 lg:px-8"
>
  <!-- navbar-start: menú (móvil) + logo (desktop) -->
  <div class="navbar-start">
    <label
      for="main-drawer"
      aria-label="Abrir menú"
      class="btn btn-square btn-ghost btn-sm sm:btn-md lg:hidden"
    >
      <Icon name="mdi:menu" size={28} class="sm:h-8 sm:w-8" />
    </label>
    <a
      href="/"
      class="hidden items-center gap-1 px-1 text-lg font-bold tracking-wide normal-case hover:bg-transparent sm:gap-2 sm:px-2 sm:text-xl lg:flex lg:px-0"
    >
      <Image src={Logo} alt="Salva Ramos Logo" class="h-12 w-auto" />
    </a>
  </div>

  <!-- navbar-center: logo (móvil, centrado) + enlaces (desktop) -->
  <div class="navbar-center flex w-full flex-1 justify-center lg:flex-initial">
    <a href="/" class="flex min-w-28 items-center px-1 lg:hidden">
      <Image src={Logo} alt="Salva Ramos Logo" class="h-12 w-auto" />
    </a>
    <ul class="menu menu-horizontal hidden gap-1 px-1 lg:flex">
      {
        links.map((link) => (
          <li>
            <a
              data-navlink
              data-current={isActive(link.href) ? 'page' : undefined}
              href={link.href}
              class="text-sm font-medium"
              aria-current={isActive(link.href) ? 'page' : undefined}
            >
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>

  <!-- navbar-end: Iniciar sesión + CTA -->
  <div class="navbar-end gap-1 sm:gap-2">
    <a
      href="/ingresar"
      aria-label="Iniciar Sesión"
      class="btn btn-ghost btn-sm hidden lg:inline-flex"
    >
      Iniciar Sesión
    </a>
    <a
      href="/courses"
      aria-label="Ver cursos"
      class="btn btn-primary btn-sm sm:btn-md rounded-xl sm:px-4"
    >
      Empezar <span class="hidden sm:inline">ahora</span>
    </a>
  </div>
</nav>

<!-- Drawer: Menú principal (móvil) -->
<div class="drawer z-60">
  <input id="main-drawer" type="checkbox" class="drawer-toggle" />
  <div class="drawer-content"></div>
  <div class="drawer-side">
    <label for="main-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <ul class="menu bg-base-200 min-h-full w-72 p-4 sm:w-80 sm:p-6">
      <li class="menu-title mb-2">
        <span class="text-base sm:text-lg">Navegación</span>
      </li>
      {
        links.map((link) => (
          <li>
            <a
              data-navlink
              data-current={isActive(link.href) ? 'page' : undefined}
              href={link.href}
              class="flex justify-between py-3 text-base font-medium sm:py-4 sm:text-lg"
              aria-current={isActive(link.href) ? 'page' : undefined}
            >
              <Icon name={link.icon} size={24} class="sm:h-6 sm:w-6" />
              <span>{link.label}</span>
            </a>
          </li>
        ))
      }
      <div class="mt-4 mr-2 flex-none">
        <a
          href="/ingresar"
          aria-label="Iniciar Sesión"
          class="btn btn-primary btn-wide rounded-xl px-2 lg:px-4"
        >
          <Icon name="mdi:login" size={20} class="sm:h-6 sm:w-6 lg:hidden" />
          <span>Iniciar Sesión</span>
        </a>
      </div>
    </ul>
  </div>
</div>
