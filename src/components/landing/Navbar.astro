---
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import Logo from '/src/assets/imagotipo.svg';
import IsoTipo from '/src/assets/isotipo.svg';
const links = [
  { href: '/', label: 'Inicio', icon: 'mdi:home' },
  { href: '/courses', label: 'Cursos', icon: 'mdi:book' },
  { href: '/#contact', label: 'Contacto', icon: 'mdi:contact-mail' },
];
---

<!-- Navbar principal -->
<nav
  class="navbar h-navbar bg-base-200 border-base-300 fixed top-0 z-50 flex justify-between border-b px-3 backdrop-blur sm:px-4 md:px-8 lg:px-12"
>
  <!-- Mobile: Botón menú principal (izquierda) -->
  <div class="flex-none lg:hidden">
    <label
      for="main-drawer"
      aria-label="open main menu"
      class="btn btn-navbar btn-square btn-sm sm:btn-md"
    >
      <Icon name="mdi:menu" size={28} class="sm:h-8 sm:w-8" />
    </label>
  </div>

  <!-- Logo/título -->
  <div class="flex-1 py-2 lg:flex-none">
    <a
      href="/"
      class="flex items-center justify-center gap-1 px-1 text-lg font-bold tracking-wide normal-case hover:border-0 hover:bg-transparent sm:gap-2 sm:px-2 sm:text-xl"
    >
      <Image src={Logo} alt="Salva Ramos Logo" class="h-12 w-auto" />
    </a>
  </div>

  <!-- Desktop: Menú de navegación (centro) -->
  <div class="hidden lg:flex lg:flex-1 lg:justify-center">
    <ul class="menu menu-horizontal gap-1">
      {
        links.map((link) => (
          <li>
            <a data-navlink href={link.href} class="text-sm font-medium transition-colors">
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>

  <!-- Botón Iniciar Sesión -->
  <div class="mr-2 flex-none">
    <a href="/ingresar" aria-label="Iniciar Sesión" class="btn btn-ghost lg:px-2">
      <Icon name="mdi:login" size={20} class="sm:h-6 sm:w-6 lg:hidden" />
      <span class="hidden lg:inline">Iniciar Sesión</span>
    </a>
  </div>
  <div class="flex-none">
    <a
      href="/ingresar"
      aria-label="Iniciar Sesión"
      class="btn btn-primary rounded-full px-2 lg:px-4"
    >
      <Icon name="mdi:login" size={20} class="sm:h-6 sm:w-6 lg:hidden" />
      <span class="hidden lg:inline">Empezar ahora</span>
    </a>
  </div>
</nav>

<!-- Drawer 1: Menú principal -->
<div class="drawer z-60">
  <input id="main-drawer" type="checkbox" class="drawer-toggle" />
  <div class="drawer-content"></div>
  <div class="drawer-side">
    <label for="main-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <ul class="menu bg-base-200 min-h-full w-72 p-4 sm:w-80 sm:p-6">
      <li class="menu-title mb-2">
        <span class="text-base sm:text-lg">Navegación</span>
      </li>
      {
        links.map((link) => (
          <li>
            <a
              data-navlink
              href={link.href}
              class="flex justify-between py-3 text-base font-medium sm:py-4 sm:text-lg"
            >
              <Icon name={link.icon} size={24} class="sm:h-6 sm:w-6" />
              <span>{link.label}</span>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</div>

<!-- Drawer 2: Menú de autenticación -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const currentPath = window.location.pathname;
    const currentHash = window.location.hash;
    const current = currentPath.concat(currentHash);
    const links = document.querySelectorAll('[data-navlink]');
    links.forEach((el) => {
      const href = el.getAttribute('href');
      if (href === current) {
        el.classList.add('active');
        el.setAttribute('aria-current', 'page');
      } else {
        el.classList.remove('active');
        el.removeAttribute('aria-current');
      }
    });
  });
</script>
