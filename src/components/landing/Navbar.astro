---
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import Logo from '/src/assets/logo.webp';
const links = [
  { href: '/', label: 'Inicio', icon: 'mdi:home' },
  { href: '/courses', label: 'Cursos', icon: 'mdi:book' },
  { href: '/#contact', label: 'Contacto', icon: 'mdi:contact-mail' },
];
---

<!-- Navbar principal -->
<nav
  class="navbar h-navbar px-3 sm:px-4 md:px-8 lg:px-12 fixed top-0 bg-base-200 backdrop-blur border-b border-base-300 z-50 flex justify-between"
>
  <!-- Mobile: Botón menú principal (izquierda) -->
  <div class="flex-none lg:hidden">
    <label
      for="main-drawer"
      aria-label="open main menu"
      class="btn btn-navbar btn-square btn-sm sm:btn-md"
    >
      <Icon name="mdi:menu" size={28} class="sm:w-8 sm:h-8" />
    </label>
  </div>

  <!-- Logo/título -->
  <div class="flex-1 lg:flex-none">
    <a
      href="/"
      class="flex justify-center items-center normal-case text-lg sm:text-xl font-bold tracking-wide gap-1 sm:gap-2 hover:bg-transparent hover:border-0 px-1 sm:px-2"
    >
      <div class="avatar">
        <!-- <div class="w-10 h-20 sm:w-12 sm:h-24 rounded-full">
          <Image src={Logo} alt="Salva Ramos Logo" />
        </div> -->
      </div>
      <span class="hidden sm:inline font-sans font-bold text-xl text-[#0B192C] tracking-tight"
        >Salva Ramos</span
      >
    </a>
  </div>

  <!-- Desktop: Menú de navegación (centro) -->
  <div class="hidden lg:flex lg:flex-1 lg:justify-center">
    <ul class="menu menu-horizontal gap-1">
      {
        links.map((link) => (
          <li>
            <a data-navlink href={link.href} class="text-sm font-medium transition-colors">
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>

  <!-- Botón Iniciar Sesión -->
  <div class="flex-none mr-2">
    <a href="/ingresar" aria-label="Iniciar Sesión" class="btn btn-ghost lg:px-2">
      <Icon name="mdi:login" size={20} class="sm:w-6 sm:h-6 lg:hidden" />
      <span class="hidden lg:inline">Iniciar Sesión</span>
    </a>
  </div>
  <div class="flex-none">
    <a href="/ingresar" aria-label="Iniciar Sesión" class="btn rounded-full btn-primary lg:px-2">
      <Icon name="mdi:login" size={20} class="sm:w-6 sm:h-6 lg:hidden" />
      <span class="hidden lg:inline">Empezar ahora</span>
    </a>
  </div>
</nav>

<!-- Drawer 1: Menú principal -->
<div class="drawer z-60">
  <input id="main-drawer" type="checkbox" class="drawer-toggle" />
  <div class="drawer-content"></div>
  <div class="drawer-side">
    <label for="main-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <ul class="menu bg-base-200 min-h-full w-72 sm:w-80 p-4 sm:p-6">
      <li class="menu-title mb-2">
        <span class="text-base sm:text-lg">Navegación</span>
      </li>
      {
        links.map((link) => (
          <li>
            <a
              data-navlink
              href={link.href}
              class="text-base sm:text-lg font-medium flex justify-between py-3 sm:py-4"
            >
              <Icon name={link.icon} size={24} class="sm:w-6 sm:h-6" />
              <span>{link.label}</span>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</div>

<!-- Drawer 2: Menú de autenticación -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const currentPath = window.location.pathname;
    const currentHash = window.location.hash;
    const current = currentPath.concat(currentHash);
    const links = document.querySelectorAll('[data-navlink]');
    links.forEach((el) => {
      const href = el.getAttribute('href');
      if (href === current) {
        el.classList.add('active');
        el.setAttribute('aria-current', 'page');
      } else {
        el.classList.remove('active');
        el.removeAttribute('aria-current');
      }
    });
  });
</script>
