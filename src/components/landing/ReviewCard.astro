---
import type { CollectionEntry } from 'astro:content';

interface Props {
  review: CollectionEntry<'reviews'>;
}

const { review } = Astro.props;
---

<div class="card bg-white shadow-xl h-full">
  <div class="card-body">
    <!-- Review Text -->
    <p class="text-base-content/80 mb-6 leading-relaxed line-clamp-4">
      "{review.data.comment}"
    </p>

    <!-- Course Badge -->
    <div class="mb-4">
      <div class="badge badge-accent badge-sm">{review.data.course}</div>
    </div>

    <!-- Reviewer Info -->
    <div class="flex items-center gap-3 mt-auto">
      <div class="avatar avatar-placeholder">
        {
          review.data.image ? (
            <div class="w-12 h-12 rounded-full">
              <img src={review.data.image} alt={review.data.name} />
            </div>
          ) : (
            <div class="bg-primary text-primary-content rounded-full w-12 h-12 flex items-center justify-center">
              <span class="text-lg font-bold">
                {review.data.name
                  .split(' ')
                  .map((n) => n[0])
                  .join('')}
              </span>
            </div>
          )
        }
      </div>
      <div>
        <div class="flex items-center gap-2">
          <h4 class="font-semibold">{review.data.name}</h4>
          {
            review.data.date && (
              <span class="text-xs text-base-content/60">• {review.data.date}</span>
            )
          }
        </div>
        <p class="text-sm text-base-content/70">
          {review.data.profile}
          {review.data.studies && <span> • {review.data.studies}</span>}
        </p>
      </div>
    </div>
  </div>
</div>

<style>
  .line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
