---
import Layout from '../layouts/Layout.astro';
import NavBar from '@components/UI/NavBar.astro';
import Cards from '@components/UI/Cards.astro';
import CardsContainer from '@components/UI/CardsContainer';
import Greetings from '@components/home/Greetings';
---

<Layout>
  <div class="flex h-screen">
    <!-- Sidebar/Navbar -->
    <aside class="hidden md:flex md:flex-col w-48 shadow-lg p-4 bg-accent-content">
      <NavBar />
    </aside>
    <!-- Mobile Navbar Button -->
    <button
      class="md:hidden fixed top-4 left-4 z-50 btn btn-square btn-primary"
      onclick="document.getElementById('mobile-sidebar').classList.toggle('hidden')"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        ><path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path></svg
      >
    </button>
    <aside
      id="mobile-sidebar"
      class="fixed top-0 left-0 h-full w-64 bg-base-100 shadow-lg p-4 z-40 hidden md:hidden"
    >
      <NavBar />
    </aside>
    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto grid grid-cols-1 gap-6">
      <!-- Accesos directos -->
      <Greetings client:load />
      <Cards />
      <CardsContainer titleSection={'Proximas clases'} client:load />
      <CardsContainer titleSection={'Mis ramos'} client:load />

      <script>
        // Cierra el sidebar m√≥vil al hacer click fuera
        document.addEventListener('click', function (e) {
          const sidebar = document.getElementById('mobile-sidebar');
          const button = document.querySelector('button[onclick]');
          if (
            sidebar &&
            button &&
            !sidebar.classList.contains('hidden') &&
            !sidebar.contains(e.target as Node) &&
            !button.contains(e.target as Node)
          ) {
            sidebar.classList.add('hidden');
          }
        });
      </script>
    </main>
  </div>
</Layout>
